
考虑一个暴力的 dp 转移，即 $f_{i,j,0/1/2}$ 表示以 $i$ 为根的子树中，一共有 $j$ 条已经确定的链，点 $i$ 的度数为 $0/1/2$ 的最大分数

埃及吧管他，直接来wqs

变成 $f_{i,0/1/2}$ 表示以 $i$ 为根的子树中，点 $i$ 的度数为 $0/1/2$ 的最大分数

每次dp后我们进行操作 $f_{v,0}\leftarrow \max\{ f_{v,0}\},\{ f_{v,1}+w,f_{v,2} \}$

考虑其与子树 $v$ 的合并

$f_{i,0}\leftarrow f_{i,0}+f_{v,0}$ 

$f_{i,1}\leftarrow \max\{ f_{i,1}+f_{v,0} \},\{f_{i,0}+f_{v,1}+c  \},\{ f_{i,0} \}$ 

$f_{i,2}\leftarrow \max\{ f_{i,1}+f_{v,1}+c+w \}\{ f_{i,2}+f_{v,0} \}$ 


耶我太强了