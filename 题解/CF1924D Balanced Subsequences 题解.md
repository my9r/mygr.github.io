整个思路链还是比较巧妙的

考虑这么转化

首先我们有贪心策略，然后考虑这么一件事情

最长合法子序列为 $2k$  $\Rightarrow$  能够产生匹配的右括号数量为 $k$  $\Rightarrow$  未能匹配的右括号数量为 $m-k$ 

我们有一种常见的转化方法就是绘制折线图，那么此时未能匹配的右括号数量就等于其在折线的最低点纵坐标为 $m-k$

那么问题就变成了从 $(0,0)$ 出发，到达点 $(n+m,n-m)$ 且最低点纵坐标为 $m-k$ 的方案数

可以转化为最低点小于等于 $m-k$ 的方案 - 最低点小于等于 $m-k-1$ 的方案

其实也就是转化为了经过该线段的方案数

那么就可以反射容斥了