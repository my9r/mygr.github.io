考虑分块

朴素分块我们能做到 $O(\sqrt n \log{\sqrt n})$ ，瓶颈在修改，考虑平衡

考虑对每个块维护一个最大值以及右侧第一个大于当前最大值的位置

修改时则一步步跳即可，对中间段区间加

当到达一个块内时，需要对其最大值的位置对应后缀加

所以对于每个块，我们需要维护 块内 $b$ 之和($Bs$)，块内前缀 $max$ ($M_i$)，$M_i$ 的后缀和 ($Ms_i$) ，后缀 $max$ 加标记 $p_i$ ，前缀加标记 ($ad_i$) ，块内最大值的右侧第一个大于其的位置 $pre_i$ 
