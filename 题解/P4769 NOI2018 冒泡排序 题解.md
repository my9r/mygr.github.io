
考虑这么搞

式子可以化为

$$逆序对数=使其变为有序的交换数下界$$
所以当出现 $i<j<k,a_i>a_j>a_k$ 时，此时的若要 $i,k$ 分别到他们期望的位置上时，则一定会与 $j$ 产生交换，于是操作数一定不一致，所以一定不会出现长度大于等于 3 的下降子序列

从这个角度上来讲，如果一个数它并非前缀最大值，那么小于它的数一定都已经出现过了，故它的值一定等于前缀的 mex

也就是说，当我们知道有