

## T1

发现这样一件事，因为可以重复走一条边，所以真正有区别的只有奇偶性

当 $A_i$ 为奇数时，则可以任意的表达任何数

当 $A_i$ 为偶数时，则经过



考虑下当 $A_i=2$ 时该怎么做

哦是不是

把每个简单环处理出来，然后像最大 $xor$ 路径那样做

问题在于我如何去表示到某一点时直接结束的情况

首先不难发现，若开始与结束的位置本质不同，则他们所构成的方案也一定不同

然后我们发现其实并没有权值的说法，因为当 $A_i$ 为偶数时，则权值一定相同

然后我们有若两点之前存在一条奇数边，则两点间其他所有的边都可以等价于奇数边，所以可以将这两点缩起来

所以我们实际上只需要考虑偶数边的情况

而偶数边的情况，等价于两两选点，然后乘上 $2^{\text{非树边}}$


还有几个细节是对于每个联通块，都可以产生全 $0$ 的情况，答案需要减去联通块数+1






## T2

考虑当前操作的点

等价于将从当前点到根的路径上的所有点都向下动一步，其余的所有点都向其父亲方向走一步



