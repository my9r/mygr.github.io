

## T1

考虑值分为三部分 $\le \frac{K_i}{2},> K_i$ 与其他的部分

对于 $> K_i$ 的部分，等价于将问题分割为了若干个子问题，但是都没办法做，所以这部分的值必须都位于后缀，且单调递增

其次对于其他部分的数而言，由于他们之间不能相互交换，所以也得是单调递增的

所以问题就变成了对于每个$\le \frac{K_i}{2}$ 的一个数而言，其左侧第一个 $>\frac{K_i}{2}$ 的数是否大于 $K_i-a$

考虑离线，从大到小的枚举每个 $a$ ，表示 $a > \frac{K_i}{2}$ 了

找到他左右第一个已经添加过的位置，可以计算出这个区间当 $K$ 为几时就不再合法了

然后查询时主席树查询完全包含的区间中，不合法的 $K$ 的最大值即可

所以我们需要


## T2

不妨先分析下有解的条件

对于一个首都而言，删去该点以及其所有边，则相同颜色的点必须在同一子树内

所以我们求出所有同颜色的虚树，路径上所有的非该颜色的点都不能作为首都

考虑距离首都最近的非同色的点，也就意味着在距离他小于 $dis$ 的范围内，存在他的首都

也就意味着，这个点对其实是两首都的中点

也就是说，无论如何，同色点都必须联通，否则一定会炸




1 1 1 2 2 2


## T3

不难发现最多只会选择四个优惠活动，此时一定能构造出一种方案使得整个平面都被覆盖